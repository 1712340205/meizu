<!DOCTYPE html><html lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Document</title><link rel=stylesheet href=../lib/bootstrap/dist/css/bootstrap.css><link rel=stylesheet href=../css/common.css><link rel=stylesheet href=../css/xiang.css><link rel=stylesheet href=../css/jquery.exzoom.css><style>#exzoom{width:98%;height:400px}</style></head><body><header><nav><article class=nav_top><h1></h1><article class=nav_right><section class=right_inp><input type=text placeholder="魅族 16T"> <span class="glyphicon glyphicon-search"></span></section><span class=xiang id=du><img src=../images/heiren.png alt=""><ul class=dl><li><a href=./login.html>立即登录</a></li><li><a href=./login.html>立即注册</a></li></ul></span><span class="xiang cs" id=gw><img src=../images/heic.png alt=""><em class=shu>0</em></span></article><ul><li class=xian><a href="">手机</a></li><li class=xian><a href="">声学</a></li><li class=xian><a href="">配件</a></li><li class=xian><a href="">生活</a></li><li><a href="">Flyme</a></li><li><a href="">服务</a></li><li><a href="">专卖店</a></li><li><a href="">社区</a></li><li class=xian><a href="">APP下载</a></li></ul></article></nav><article class=lie><ul></ul></article></header><article class=title><article class=title_z><span>魅族 Note9</span><ul><li><a href="">概述</a></li><li><a href="">参数</a></li><li><a href="">常见问题</a></li></ul></article></article><main><article class=main_l><div class=exzoom id=exzoom><div class=exzoom_img_box><ul class=exzoom_img_ul><li><img src="" alt=""></li><li><img src=""></li><li><img src=""></li><li><img src=""></li><li><img src=""></li></ul></div><div class=exzoom_nav></div></div></article><article class=main_r><section class=r_top><h1>魅族 Note9</h1><p>【限时领券立减200】【限时6期免息】 骁龙675 | 后置4800万 | 前置2000万 | 独家定制水滴设计全面屏 | 4000mAh大容量电池 | 18W mCharge快充</p></section><section class=r_sec><p><i>￥</i>1299.00</p><article class=zhu><span>优惠券</span> <em><i>满1199减200</i> <a href="">更多 ></a></em></article><article class=zhu><span>加购价</span> 另加29元起，即可换购超值商品 <em><a href="">立即加购 ></a></em></article></section><section class=r_zui><p><i>支持</i> <span><em></em>花呗分期</span> <span><em></em>顺丰发货</span> <span><em></em>7天无理由退货（激活后不支持）</span></p><p><i>配送服务</i> <s>广东 广州市</s></p><p>本商品由 魅族 负责发货并提供售后服务<span>商城客服</span></p></section><section class="xuan clearfix"><span>型号</span><article class=lei><i>魅族 Note9</i></article></section><section class="xuan clearfix"><span>网络类型</span><article class=lei><i>全网公开版</i></article></section><section class="xuan clearfix"><span>内存容量</span><article class=lei><i>4+64G</i> <i>6+64G</i> <i>4+128G</i></article></section><article class=ji><span>数量</span><section class=suan><a href="" class=qa>-</a> <input type=text value=1> <a href="" class=za>+</a></section></article><article class=last><a href="" class=mai>立即购买</a> <a href="" class=jia>加入购物车</a></article></article></main><script src=../lib/jquery/dist/jquery.min.js></script><script src=../js/jquery-1.11.0.min.js></script><script src=../js/jquery.exzoom.js></script><script>// 放大镜
        $("#exzoom").exzoom({
            autoPlay: false,
        });

        // 判断购物车是否有数据
        const cartList = JSON.parse(localStorage.getItem('cartList'))
        if (cartList) {
            $('.shu').text(cartList.length)
        }

        // 跳转购物车
        $('#gw').children().click(() => {
            window.location.href = './cart.html'
            console.log(9)
        })

        getSequ()
        function getSequ() {
            $.ajax({
                url: '../lib/index.json',
                dataType: 'json',
                success: function (res) {

                    let ha = ''
                    // 渲染二级菜单
                    res.hua.forEach(item => {
                        ha += `<li>${item.name}</li>`
                    })
                    $('.nav_top > ul')
                        .html(ha)
                        .on({
                            mouseenter: () => $('.lie').stop().slideDown(),
                            mouseleave: () => $('.lie').stop().slideUp()
                        })
                        .children('li')
                        .on('mouseover', function () {
                            const index = $(this).index()
                            const list = res.hua[index].list

                            let hu = ''
                            list.forEach(item => {
                                hu += `
                                    <li>
                                        <img src="${item.url}" alt="">
                                        <p>${item.title}</p>
                                        <span>${item.jie}</span>
                                    </li>
                            `
                            })
                            $('.lie > ul').html(hu)
                        })

                    $('.lie').on({
                        mouseover: function () { $(this).finish().show() },
                        mouseout: function () {
                            $(this).finish().slideUp()
                            $('.nav_top ul').find('li').css({ "color": "white" })
                        }
                    })
                }
            })
        }

        // 渲染列表页传来的数据
        const info = JSON.parse(localStorage.getItem('goodsInfo'))
        if (!info) {
            alert('数据不存在')
            window.location.href = './list.html'
        }

        let str = ''
        bindHtml()
        function bindHtml() {
            $('.title span').text(info.title)
            $('.r_top h1').text(info.title)
            $('.r_top p').text(info.jie)
            $('.r_sec p').text(info.price)

            $('.exzoom_img_ul').find('li').eq(0).children().attr('src', info.img)
            $('.exzoom_img_ul').find('li').eq(1).children().attr('src', info.img1)
            $('.exzoom_img_ul').find('li').eq(2).children().attr('src', info.img2)
            $('.exzoom_img_ul').find('li').eq(3).children().attr('src', info.img3)
            $('.exzoom_img_ul').find('li').eq(4).children().attr('src', info.img5)
        }

        $('.jia').click(() => {
            console.log(9)

            const cartList = JSON.parse(localStorage.getItem('cartList')) || []
            // 向localStorage 里添加要加入购物车的商品数据
            let exits = cartList.some(item => {
                return item.id == info.id
            })

            if (exits) {

                let data = null
                for (let i = 0; i < cartList.length; i++) {
                    if (cartList[i].id == info.id) {
                        data = cartList[i]
                        break
                    }
                }
                data.number++

                data.xiaoji = data.number * data.price
            } else {
                info.number = 1


                info.xiaoji = info.price
                info.isSelect = false
                cartList.push(info)
            }

            // 在存储到 localStorage 里面
            localStorage.setItem('cartList', JSON.stringify(cartList))
        })

        // 获取cookie,如果已登录，就显示用户名
        function getCookie(key) {
            str = ''
            var tmp = document.cookie.split('; ')
            // 循环遍历
            for (var i = 0; i < tmp.length; i++) {

                var t = tmp[i].split('=')
                if (t[0] === key) {
                    str = t[1]
                }
            }
            return str
        }
        var res = getCookie('user')
        if (res) {
            $('#du').text(res)
        }</script></body></html>